// Generated by CoffeeScript 1.4.0
(function() {

  $(document).ready(function() {
    var $container, $inner, $nav, hideDrawer, setInnerWidth, showNav, slideNext, viewportW;
    $nav = $('nav.slides-nav');
    $container = $('#slides');
    $inner = $container.find('.slides-container');
    viewportW = document.documentElement.clientWidth;
    $(window).focus(function() {
      var window_focus;
      return window_focus = true;
    });
    slideNext = function(id) {
      var $current, $next, index, pxVal, width;
      $current = $container.find('.active');
      index = $inner.find('section').index($current);
      if (id === "next") {
        $next = $current.next();
        width = (index + 1) * 90;
        pxVal = (viewportW * (index + 1)) * (90 / 100);
      } else if (id === "prev") {
        $next = $current.prev();
        width = (index - 1) * 90;
        pxVal = (viewportW * (index - 1)) * (90 / 100);
      }
      if ($next.length) {
        $inner.css('transform', "translateX(-" + pxVal + "px)");
        $current.removeClass('active');
        return $next.addClass('active');
      }
    };
    window.onresize = function() {
      var $current, index, pxVal;
      viewportW = document.documentElement.clientWidth;
      $current = $container.find('.active');
      index = $inner.find('section').index($current);
      pxVal = (viewportW * index) * (90 / 100);
      return $inner.css('transform', "translateX(-" + pxVal + "px)");
    };
    $(window).keydown(function(event) {
      var arrow, keyCode;
      keyCode = event.keyCode || event.which;
      arrow = {
        left: 37,
        up: 38,
        right: 39,
        down: 40
      };
      switch (keyCode) {
        case arrow.left:
          return slideNext("prev");
        case arrow.right:
          return slideNext("next");
        case arrow.down:
          return showNav();
        case arrow.up:
          return showNav();
      }
    });
    $('.arrow').on('click', function() {
      var id;
      id = $(this).attr('data-id');
      slideNext(id);
      return hideDrawer();
    });
    setInnerWidth = function() {
      var width;
      width = null;
      $(".slides-container section").each(function() {
        return width = width + $(this).outerWidth(true) + 3;
      });
      return $inner.css('width', width);
    };
    setInnerWidth();
    showNav = function() {
      if ($container.hasClass('show-nav')) {
        return $container.removeClass('show-nav').addClass('hide-nav');
      } else if ($container.hasClass('hide-nav')) {
        return $container.removeClass('hide-nav').addClass('show-nav');
      }
    };
    $('.menu').click(function() {
      return showNav();
    });
    $('.drawer a').on('click', function() {
      var $current, $target, currentIndex, dataId, pxVal, targetIndex;
      dataId = $(this).attr('href');
      dataId = dataId.replace("#", "");
      $target = $("[data-id='" + dataId + "']");
      targetIndex = $inner.find('section').index($target);
      $current = $container.find('.active');
      currentIndex = $inner.find('section').index($current);
      if (targetIndex !== currentIndex) {
        pxVal = (viewportW * targetIndex) * (90 / 100);
        $inner.css('transform', "translateX(-" + pxVal + "px)");
        $current.removeClass('active');
        $target.addClass('active');
        return hideDrawer();
      }
    });
    return hideDrawer = function() {
      return $inner.on("transitionend webkitTransitionEnd MSTransitionEnd", function() {
        return $container.removeClass('show-nav').addClass('hide-nav');
      });
    };
  });

}).call(this);
